<!DOCTYPE html>
<html lang="en">
<head>
	<title>How to setup an ES6 production-ready project</title>
	<meta charset="utf-8">
	<meta name="robots" content="index,follow">
	<meta name="revisit-after" content="1 days">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Meta data -->
	<meta name="author" content="Moritz Kröger">
	
	<meta name="keywords" content="ecmascript2015,javascript">
	
	<meta name="description" content="As ES6 is really hyped this year and the specification has eventually been finished, I wanted to start using it. By today I have turned almost all my private...">
	<link rel="alternate" type="application/rss+xml" title="Moritz Kröger" href="http://morkro.de/feed.xml">

	<!-- Open Graph data -->
	<meta property="og:title" content="How to setup an ES6 production-ready project">
	<meta property="og:description" content="As ES6 is really hyped this year and the specification has eventually been finished, I wanted to start using it. By today I have turned almost all my private...">
	<meta property="og:image" content="http://morkro.de/assets/img/moritz.jpg">
	<meta property="og:type" content="website">
	<meta property="og:url" content="http://morkro.de/writes/2015/how-to-setup-your-own-es6-project">

	<!-- Twitter Card data -->
	<meta property="twitter:card" content="summary">
	<meta property="twitter:site" content="@morkro">
	<meta property="twitter:creator" content="@morkro">
	<meta property="twitter:title" content="How to setup an ES6 production-ready project">
	<meta name="twitter:description" content="As ES6 is really hyped this year and the specification has eventually been finished, I wanted to start using it. By today I have turned almost all my private...">
	<meta property="twitter:image" content="http://morkro.de/assets/img/moritz.jpg">

	<!-- Chrome Mobile theming -->
	<meta name="theme-color" content="#2196f3">

	<link rel="shortcut icon" href="/../assets/favicon.ico">
	<link rel="author" href="humans.txt">
	<link rel="stylesheet" type="text/css" href="/../css/main.css?v=20162824">
</head>
<body class="template-blog">
	<header id="page-header">
		<div class="header-inner container">
	<nav role="navigation" class="header-nav">
		<ul>
			<li><a href="/">Introduction</a></li>
			<li><a href="/writes">Articles</a></li>
			<li><a href="/works">Projects</a></li>
		</ul>
	</nav>
</div>
	</header>

	<main role="main" id="page-content">
		<div class="content-inner">
	<article class="content-article container">
		<header>
			<div class="headline-gradient">
				<h1 title="How to setup an ES6 production-ready project">How to setup an ES6 production-ready project</h1>
			</div>

			<ul class="article-info">
				<li>
					<span>Published</span>
					<span>27 August 2015</span>
				</li>
				<li>
					<span>Categories</span>
					<span><a href="/tag/ecmascript2015">#ecmascript2015</a> <a href="/tag/javascript">#javascript</a> </span>
				</li>
			</ul>
		</header>

		<section class="article-body">
			<p>As ES6 is really hyped this year and the specification has eventually been finished, I wanted to start using it. I have been <em>(okay I still am)</em> the guy at work who took every chance talking about ES6 and all the glory it provides. Which might not have been the best idea with a lot of back-end developers joining the discussion:</p>

<blockquote>
  <p>Sounds cool Moritz, but when can we use it? :trollface:</p>
</blockquote>

<p>Sad to say that browser support is still under heavy development, and using it in a production environment was beyond considering. 
So I accepted our fate, having to wait for a couple of years. And what about <em>all</em> the browser who won’t have any ES6 features but still need to be supported? <em>Sigh</em>, let’s add another few years.</p>

<p>Fortunately ES6 turns JavaScript into the <a href="https://www.youtube.com/watch?v=PlmsweSNhTw">language for compilers</a>. And there are already plenty of <strong>ES6 to ES5</strong> transpilers, which make it possible to write ES6 for production-ready projects today. <em>A dream comes true!</em> By now I have turned almost all my private projects and a couple of client projects into a solid ES6 setup.</p>

<p><strong>In this article I want to share my experience on how to create a good production-ready ES6 setup for front-end projects.</strong></p>

<h2 id="getting-started-choosing-a-transpiler">Getting started: Choosing a transpiler</h2>

<p>Compiler or transpiler? Let me explain this here because I was also confused when I first stumbled upon this. A <strong>compiler</strong> turns a high-level programming language into a low-level programming language. Whereas a <strong>transpiler</strong>, or <a href="https://en.wikipedia.org/wiki/Source-to-source_compiler"><em>source-to-source compiler</em></a>, remains on the same level of complexity translating from one high-level programming language to another.</p>

<p>The <strong>three major transpiler</strong> out there are <a href="https://babeljs.io/">Babel.js</a> with currently <a href="http://kangax.github.io/compat-table/es6/#babel"><strong>71%</strong></a> of feature compatibility, <a href="https://github.com/google/traceur-compiler">Traceur</a> supporting <a href="http://kangax.github.io/compat-table/es6/#tr"><strong>59%</strong></a> and <a href="http://www.typescriptlang.org/">TypeScript</a> with <a href="http://kangax.github.io/compat-table/es6/#typescript"><strong>52%</strong></a>. This is already quite good and the majority of features are supported <em>(a lot of the unsupported features refer to Subclassing and Proxying)</em>. I recommend using Babel as it provides the best support and you probably want to feel as free as possible writing ES6.</p>

<p>The features I tend to use the most are <code class="highlighter-rouge">=&gt;</code> arrow functions, classes, <code class="highlighter-rouge">const</code> and <code class="highlighter-rouge">let</code>, template strings and modules. And I am really trying to find a good use case for generator functions. This can quickly change based on my project requirements though, but I guess this is what most developers will want to use at the beginning.</p>

<h3 id="adding-the-final-es6-feeling">Adding the final ES6 feeling</h3>

<p>Babel is great, but lacks one huge feature: <strong>ES6 modules</strong>. <a href="http://browserify.org/"><strong>Browserify</strong></a> to the rescue! With its CommonJS support that is very similiar to modules, we can <code class="highlighter-rouge">require('modules')</code> in the browser and properly put all dependencies into bundles. For me it added the final <em>ES6 feel</em>.</p>

<h2 id="combine-and-automate">Combine and automate</h2>

<p>Browserify + Babel is a common setup today and together they cover a lot of features which front-end developers are most interested about. Even though both have their own Command Line Interface, it is quite annoying and time consuming to type <code class="highlighter-rouge">$ browserify</code> everytime a file has been modified.
So I suggest to use a task runner, as this is part of a default front-end setup nowadays.</p>

<p>For the rest of this article I will use <strong>Grunt</strong> as an example, but everything is easily portable to a Gulp setup.</p>

<h3 id="the-projects-structure">The project’s structure</h3>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">cool-es6-project/
├── dist/
│  ├── assets/...
│  ├── styles.min.css
│  ├── app.js
│  ├── index.html
├── src/
│  ├── scripts/
│  │  ├── module.js
│  │  ├── index.js
│  ├── styles/...
│  ├── assets/...
│  ├── index.html
├── Gruntfile.js
├── package.json
└── .eslintrc</code></pre></figure>

<p>This is very simplified for this article and would be more advanced in a bigger project. Feel free to have a look at my example boilerplate <a href="https://github.com/morkro/FrontBook">FrontBook</a>, where I also showcase <code class="highlighter-rouge">views/</code>, <code class="highlighter-rouge">assets/</code> and <code class="highlighter-rouge">styles/</code>.</p>

<h3 id="create-the-packagejson">Create the <code class="highlighter-rouge">package.json</code></h3>

<p>A <code class="highlighter-rouge">package.json</code> usually contains relevant meta data for the project. Here are the ES6 <code class="highlighter-rouge">devDependencies</code>:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cool-es6-project"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"grunt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4.x"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"babelify"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^6.1.2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-browserify"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.8.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-eslint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^16.0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"grunt-contrib-watch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.6.x"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>The modules used for this are:</p>

<ul>
  <li><a href="http://gruntjs.com/"><code class="highlighter-rouge">grunt</code></a>: The JavaScript task runner</li>
  <li><a href="https://github.com/babel/babelify"><code class="highlighter-rouge">babelify</code></a>: Babel.js transformer for Browserify</li>
  <li><a href="https://github.com/jmreidy/grunt-browserify"><code class="highlighter-rouge">grunt-browserify</code></a>: Browserify Grunt task</li>
  <li><a href="https://github.com/sindresorhus/grunt-eslint"><code class="highlighter-rouge">grunt-eslint</code></a>: ESLint Grunt task</li>
  <li><a href="https://github.com/gruntjs/grunt-contrib-watch"><code class="highlighter-rouge">grunt-contrib-watch</code></a>: Grunt task to watch over changed files</li>
</ul>

<p>Run <code class="highlighter-rouge">npm install</code> from the projects directory to make sure all dependencies are installed and you won’t run into any errors.</p>

<h3 id="define-tasks-in-gruntfilejs">Define tasks in <code class="highlighter-rouge">Gruntfile.js</code></h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span>
  <span class="s1">'use strict'</span><span class="p">;</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-eslint'</span><span class="p">);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-browserify'</span><span class="p">);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-contrib-watch'</span><span class="p">);</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'dev'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'browserify'</span><span class="p">,</span> <span class="s1">'eslint'</span><span class="p">,</span> <span class="s1">'watch'</span><span class="p">]);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'build'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'browserify'</span><span class="p">,</span> <span class="s1">'eslint'</span><span class="p">]);</span>

  <span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="cm">/**
     * Write ES6 today, compile it to ES5.
     */</span>
    <span class="na">browserify</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">dist</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">transform</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span><span class="s1">'babelify'</span><span class="p">,</span> <span class="p">{</span> <span class="na">loose</span><span class="p">:</span> <span class="s1">'all'</span> <span class="p">}]</span>
          <span class="p">],</span>
          <span class="na">browserifyOptions</span><span class="p">:</span> <span class="p">{</span> <span class="na">debug</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">},</span>
        <span class="na">files</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">'dist/app.js'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'src/scripts/**/*.js'</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="cm">/**
     * Validates ES6 files via ESLint.
     */</span>
    <span class="na">eslint</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">configFile</span><span class="p">:</span> <span class="s1">'.eslintrc'</span>
      <span class="p">},</span>
      <span class="na">target</span><span class="p">:</span> <span class="s1">'src/scripts/**/*.js'</span>
    <span class="p">},</span>
    <span class="cm">/**
     * Run predefined tasks whenever watched files are added, 
     * modified or deleted.
     */</span>
    <span class="na">watch</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">scripts</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">files</span><span class="p">:</span> <span class="p">[</span><span class="s1">'src/scripts/**/*.js'</span><span class="p">],</span>
        <span class="na">tasks</span><span class="p">:</span> <span class="p">[</span><span class="s1">'browserify'</span><span class="p">,</span> <span class="s1">'eslint'</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span></code></pre></figure>

<p>We defined two tasks at the beginning:</p>

<ul>
  <li><code class="highlighter-rouge">grunt build</code>: Compiles your ES6 code to proper ES5 code and tests it via ESLint.</li>
  <li><code class="highlighter-rouge">grunt dev</code>: This is basically the same as <code class="highlighter-rouge">grunt build</code>, just with an additional <code class="highlighter-rouge">watch</code> task. So when anything changes in your code, everything will be compiled and linted automatically.</li>
</ul>

<p>In the <code class="highlighter-rouge">browserify</code> task we define to use <code class="highlighter-rouge">babelify</code> with the <code class="highlighter-rouge">loose: 'all'</code> option. This tells babelify to keep the ES5 code as close as possible to the ES6 code. In <code class="highlighter-rouge">browserifyOptions</code> we add <code class="highlighter-rouge">debug: true</code>, which enables source maps for better debugging. There are a couple of more <a href="http://babeljs.io/docs/usage/options/">Babel</a> and <a href="https://github.com/substack/node-browserify#var-b--browserifyfiles-or-opts">Browserify</a> options available, but in the beginning this should be fine. The task then simply runs through all files in <code class="highlighter-rouge">src/scripts/</code> and compiles them to <code class="highlighter-rouge">dist/</code>.</p>

<h3 id="linting">Linting</h3>

<p>Code needs to be tested. I recently moved from JSHint to <a href="http://eslint.org/"><strong>ESLint</strong></a> just because I like the possibility of creating my own rules and all the other available options. For me it also felt slightly easier to get it to work with ES6 code.</p>

<p>My ES6 specific configurations are:</p>

<h3 id="eslintrc"><code class="highlighter-rouge">.eslintrc</code></h3>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nt">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"browser"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"es6"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"ecmaFeatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"arrowFunctions"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"binaryLiterals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"blockBindings"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"classes"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"defaultParams"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"destructuring"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"forOf"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"generators"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"modules"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"objectLiteralComputedProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"objectLiteralDuplicateProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"objectLiteralShorthandMethods"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"objectLiteralShorthandProperties"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"octalLiterals"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"regexUFlag"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"regexYFlag"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"spread"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"superInFunctions"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"templateStrings"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"unicodeCodePointEscapes"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"globalReturn"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"jsx"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<div class="note--snippet">
	<p>Take a look at the rest of my <code>.eslintrc</code> configuration <a href="https://github.com/morkro/FrontBook/blob/master/.eslintrc" target="_blank">here</a>.</p>
</div>

<p>Let’s be honest: I just turned everything on because <em>I want all ES6 features</em>. If I don’t want specific features, I would just disable them.</p>

<h2 id="coding-in-ecmascript-6">Coding in ECMAScript 6</h2>

<p>Our setup is ready and idly waiting to compile some ES6 code for us. Great! Let’s start then. I assume that you at least have some knowledge of the <a href="http://es6-features.org/">ES6 features</a> and how they work. I will only briefly showcase a few of these, including <strong>modules</strong>.</p>

<p>We will create a simple module using the new <code class="highlighter-rouge">class</code> syntax, <code class="highlighter-rouge">export</code> it and then <code class="highlighter-rouge">import</code> in our <code class="highlighter-rouge">index.js</code> to use it.</p>

<h3 id="modulejs"><code class="highlighter-rouge">module.js</code></h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">INTERVAL</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">Timer</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="nx">getTime</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
    <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>

    <span class="k">return</span> <span class="nx">hours</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">minutes</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>

    <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">},</span> <span class="nx">INTERVAL</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Timer</span><span class="p">;</span></code></pre></figure>

<div class="note--snippet">
	<p>We could also use a template string in <code>getTime()</code>, but unfortunately the syntax highlighter I use don't support them yet.</p>
</div>

<p>The <code class="highlighter-rouge">module.js</code> contains a class called <code class="highlighter-rouge">Timer</code>, which takes an HTML element as argument in its constructor function. The <code class="highlighter-rouge">const</code> variable <code class="highlighter-rouge">INTERVAL</code> is not accessible from outside of the file and neither is part of the global scope, even though it’s used inside of the class. The class has a simple <code class="highlighter-rouge">getTime()</code> function to return the current time and an <code class="highlighter-rouge">update()</code> function to apply the current time to the HTML element passed in the constructor.</p>

<h3 id="indexjs"><code class="highlighter-rouge">index.js</code></h3>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">import</span> <span class="nx">Timer</span> <span class="nx">from</span> <span class="s1">'./module.js'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">timeElement</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Timer</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'time'</span><span class="p">)</span> <span class="p">);</span>

<span class="nx">timeElement</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span></code></pre></figure>

<p>This is pretty straight-forward. We imported the class, assigned it to the <code class="highlighter-rouge">timeElement</code> variable and called <code class="highlighter-rouge">update()</code> to initialise the module.</p>

<p>Pretty cool, isn’t it? We don’t have to worry much about the global scope anymore and can eventually think in a more modularised way.</p>

<h3 id="the-es5-output">The ES5 output</h3>

<p>Since all this will be compiled to proper ES5 code, let’s take a quick look at how the output looks like:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="nx">e</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">r</span><span class="p">){</span><span class="kd">function</span> <span class="nx">s</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">u</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">n</span><span class="p">[</span><span class="nx">o</span><span class="p">]){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">t</span><span class="p">[</span><span class="nx">o</span><span class="p">]){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">require</span><span class="o">==</span><span class="s2">"function"</span><span class="o">&amp;&amp;</span><span class="nx">require</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">u</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">)</span><span class="k">return</span> <span class="nx">a</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="k">return</span> <span class="nx">i</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">);</span><span class="kd">var</span> <span class="nx">f</span><span class="o">=</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Cannot find module '"</span><span class="o">+</span><span class="nx">o</span><span class="o">+</span><span class="s2">"'"</span><span class="p">);</span><span class="k">throw</span> <span class="nx">f</span><span class="p">.</span><span class="nx">code</span><span class="o">=</span><span class="s2">"MODULE_NOT_FOUND"</span><span class="p">,</span><span class="nx">f</span><span class="p">}</span><span class="kd">var</span> <span class="nx">l</span><span class="o">=</span><span class="nx">n</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="na">exports</span><span class="p">:{}};</span><span class="nx">t</span><span class="p">[</span><span class="nx">o</span><span class="p">][</span><span class="mi">0</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nx">t</span><span class="p">[</span><span class="nx">o</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="nx">e</span><span class="p">];</span><span class="k">return</span> <span class="nx">s</span><span class="p">(</span><span class="nx">n</span><span class="p">?</span><span class="nx">n</span><span class="p">:</span><span class="nx">e</span><span class="p">)},</span><span class="nx">l</span><span class="p">,</span><span class="nx">l</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">t</span><span class="p">,</span><span class="nx">n</span><span class="p">,</span><span class="nx">r</span><span class="p">)}</span><span class="k">return</span> <span class="nx">n</span><span class="p">[</span><span class="nx">o</span><span class="p">].</span><span class="nx">exports</span><span class="p">}</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="k">typeof</span> <span class="nx">require</span><span class="o">==</span><span class="s2">"function"</span><span class="o">&amp;&amp;</span><span class="nx">require</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">o</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">o</span><span class="o">&lt;</span><span class="nx">r</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">o</span><span class="o">++</span><span class="p">)</span><span class="nx">s</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="nx">o</span><span class="p">]);</span><span class="k">return</span> <span class="nx">s</span><span class="p">})({</span><span class="mi">1</span><span class="p">:[</span><span class="kd">function</span><span class="p">(</span><span class="nx">require</span><span class="p">,</span><span class="nx">module</span><span class="p">,</span><span class="nx">exports</span><span class="p">){</span>
<span class="s1">'use strict'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">_interopRequireDefault</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">__esModule</span> <span class="p">?</span> <span class="nx">obj</span> <span class="p">:</span> <span class="p">{</span> <span class="s1">'default'</span><span class="p">:</span> <span class="nx">obj</span> <span class="p">};</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">_moduleJs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./module.js'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">_moduleJs2</span> <span class="o">=</span> <span class="nx">_interopRequireDefault</span><span class="p">(</span><span class="nx">_moduleJs</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">timeElement</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">_moduleJs2</span><span class="p">[</span><span class="s1">'default'</span><span class="p">](</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'time'</span><span class="p">));</span>

<span class="nx">timeElement</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>

<span class="p">},{</span><span class="s2">"./module.js"</span><span class="p">:</span><span class="mi">2</span><span class="p">}],</span><span class="mi">2</span><span class="p">:[</span><span class="kd">function</span><span class="p">(</span><span class="nx">require</span><span class="p">,</span><span class="nx">module</span><span class="p">,</span><span class="nx">exports</span><span class="p">){</span>
<span class="s1">'use strict'</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">__esModule</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">_classCallCheck</span><span class="p">(</span><span class="nx">instance</span><span class="p">,</span> <span class="nx">Constructor</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">instance</span> <span class="k">instanceof</span> <span class="nx">Constructor</span><span class="p">))</span> <span class="p">{</span> <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">'Cannot call a class as a function'</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">INTERVAL</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">Timer</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">Timer</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_classCallCheck</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">Timer</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">Timer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTime</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">getTime</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>

    <span class="k">return</span> <span class="nx">hours</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">minutes</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">Timer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">_this</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>

    <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">_this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">_this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">},</span> <span class="nx">INTERVAL</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">Timer</span><span class="p">;</span>
<span class="p">})();</span>

<span class="nx">exports</span><span class="p">[</span><span class="s1">'default'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timer</span><span class="p">;</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">[</span><span class="s1">'default'</span><span class="p">];</span>

<span class="p">},{}]},{},[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span></code></pre></figure>

<p>As you can see Browserify use a helper function at the beginning to bundle all modules in one single file. But what I think is most important here, is that the code of <code class="highlighter-rouge">module.js</code> and <code class="highlighter-rouge">index.js</code> pretty much look the same. You can easily recognise your code and still understand what is going on.</p>

<p>This file can be found in <code class="highlighter-rouge">dist/app.js</code> and should be included in your HTML views:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"app.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<h2 id="what-to-keep-in-mind">What to keep in mind</h2>

<p>As mentioned earlier, some features not supported yet. Subclassing <code class="highlighter-rouge">Date</code>, <code class="highlighter-rouge">Array</code> and <code class="highlighter-rouge">DOM</code> doesn’t work because of the limitations of ES5. It also depends a little bit on what your production environment will be like. Do you need to support Internet Explorer 8? Then keep in mind that <code class="highlighter-rouge">Object.defineProperty</code> (which is used to polyfill getters and setters) doesn’t work there.</p>

<p>Babel has a short <a href="https://babeljs.io/docs/advanced/caveats/">table</a> of its caveats.</p>

<h3 id="babel-and-objectassign">Babel and <code class="highlighter-rouge">Object.assign</code></h3>

<p>This is another thing. <code class="highlighter-rouge">Object.assign</code> is only supported with <a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Browser_compatibility">Chrome 45 and Firefox 34</a>. If you use it though, Babel won’t polyfill it and just keep it as is. In order to add the polyfill, we have to modify our <code class="highlighter-rouge">transform</code> option in the <code class="highlighter-rouge">Gruntfile.js</code> to use the <code class="highlighter-rouge">runtime</code> transformer.</p>

<p>There is also a <a href="https://github.com/babel-plugins/babel-plugin-object-assign"><code class="highlighter-rouge">babel-plugin-object-assign</code></a> plugin which replaces all occurences of <code class="highlighter-rouge">Object.assign</code> with an extend helper.</p>

<h2 id="conclusion">Conclusion</h2>

<p>So, that’s it. We could now move on and extend this setup with a good view handling or add a CSS preprocessor such as Sass. Whatever fits your project. Thanks to <strong>Babel</strong> and <strong>Browserify</strong> it’s already possible to <em>write</em> ES6 code, but still <em>use</em> ES5 code on the production environment. By that we can have a lot of fun <strong>and</strong> keep support for browser without complete feature support.</p>

<p>I have made own ES6 boilerplate called <a href="https://github.com/morkro/FrontBook"><strong><img src="/../assets/logos/frontbook.svg" width="18" height="18" style="width:18px;vertical-align:baseline;" /> FrontBook</strong></a> open source and like to share it here. It also covers some more topics such as views, styles and assets. Feel free to check it out for your own projects and customise to your needs.</p>

<hr />

<h2 id="tldr">TL;DR</h2>

<p>A good ES6 setup requires three main dependencies: <a href="https://babeljs.io/">Babel.js</a>, <a href="http://browserify.org/">Browserify</a> and a task runner such as <a href="http://gruntjs.com/">Grunt</a> or <a href="http://gulpjs.com/">gulp</a>. Babel <a href="http://kangax.github.io/compat-table/es6/#babel">covers 71%</a> of the ES6 feature set and Browserify adds the great module system.</p>

<p>Running <code class="highlighter-rouge">$ browserify</code> in the command line every time you modify something is quite annoying and time consuming. Let’s use a task runner for that. You will need:</p>

<ul>
  <li><code class="highlighter-rouge">grunt-browserify</code> using the <code class="highlighter-rouge">transform: ['babelify']</code> option,</li>
  <li>ideally a linter such as <code class="highlighter-rouge">grunt-eslint</code>,</li>
  <li><code class="highlighter-rouge">grunt-watch</code> to check for any modified files.</li>
</ul>

<p>Take care using features such as <code class="highlighter-rouge">Object.assign</code>, as this still needs an <a href="https://github.com/babel-plugins/babel-plugin-object-assign">additional plugin</a> to work in all browser.</p>

		</section>

		<p class="thanks-for-reading">Thank you for reading!</p>

		<section class="article-share">
			<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://morkro.de/writes/2015/how-to-setup-your-own-es6-project" data-via="morkro">Tweet</a>
			<script>
				!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
			</script>

			<script src="https://apis.google.com/js/platform.js" async defer>
				{lang: 'en-GB'}
			</script>
			<div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://morkro.de/writes/2015/how-to-setup-your-own-es6-project"></div>
		</section>

		<section class="article-comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">
				var disqus_shortname = 'morkro';
				/* * * DON'T EDIT BELOW THIS LINE * * */
				(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
				})();
			</script>
			<noscript>
				Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
			</noscript>
		</section>
	</article>
</div>
	</main>

	<footer id="page-footer" role="contentinfo">
		<div class="footer-inner container">
	<p>
		© <span class="footer-year">2016</span>  Moritz Kröger  <span>/</span>  <a href="/imprint">Imprint</a>
	</p>

	<ul class="socialmedia">
	<li><a href="http://twitter.com/morkro" target="_blank">
		<svg viewBox="0 0 24 24">
			<path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" />
		</svg>
	</a></li>
	<li><a href="http://github.com/morkro" target="_blank">
		<svg viewBox="0 0 24 24">
			<path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
		</svg>
	</a></li>
	<li><a href="http://stackoverflow.com/users/1724106/morkro" target="_blank">
		<svg viewBox="0 0 24 24">
			<path d="M4,14H5.5V20.5H16.5V14H18V22H4V14M15.03,19.24H6.76V17.59H15.03V19.24M14.92,16.64L6.66,16.06L6.78,14.41L15.03,15L14.92,16.64M15.04,14.41L7.04,12.26L7.47,10.67L15.47,12.81L15.04,14.41M15.5,12.1L8.33,7.96L9.16,6.53L16.33,10.66L15.5,12.1M16.63,10.34L11.77,3.64L13.11,2.67L17.97,9.37L16.63,10.34M18.36,9.17L17.35,0.96L19,0.76L20,8.97L18.36,9.17Z" />
		</svg>
	</a></li>
	<li><a href="https://de.linkedin.com/pub/moritz-kröger/67/60/9a5" target="_blank">
		<svg viewBox="0 0 24 24">
			<path d="M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3A2,2 0 0,1 7,5A2,2 0 0,1 5,7A2,2 0 0,1 3,5A2,2 0 0,1 5,3Z" />
		</svg>
	</a></li>
	<li><a href="mailto:write@morkro.de">
		<svg viewBox="0 0 24 24">
			<path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z" />
		</svg>
	</a></li>
	<li><a href="/feed.xml" target="_blank">
		<svg viewBox="0 0 24 24">
			<path d="M4.8,22V22C3.3,22 2,20.7 2,19.2V19.2C2,17.7 3.3,16.4 4.8,16.4H4.8C6.3,16.4 7.6,17.7 7.6,19.2V19.2C7.6,20.7 6.4,22 4.8,22M2,2V5C11.4,5 19,12.6 19,22H22A20,20 0 0,0 2,2M2,8.1V11.1C8,11.1 12.9,16 12.9,22H15.9C15.9,14.3 9.7,8.1 2,8.1Z" />
		</svg>
	</a></li>
</ul>
</div>
	</footer>

	<script src="/../scripts/app.init.js?v=20162824"></script>
<script async type="text/javascript">
	var _paq = _paq || [];
	_paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
	_paq.push(["setCookieDomain", "*.www.morkro.de"]);
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
	var u="//piwik.morkro.de/";
	_paq.push(['setTrackerUrl', u+'piwik.php']);
	_paq.push(['setSiteId', 2]);
	var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>
<noscript><p><img src="//piwik.morkro.de/piwik.php?idsite=2" style="border:0;" alt="" /></p></noscript>
</body>
</html>